<!DOCTYPE html>
<html lang="sv">
<head>
    <meta charset="UTF-8">
    <title>Musikquiz - 칀rtionden</title>
    <style>
        /* L칛gg till din CSS h칛r */
        body { font-family: sans-serif; padding: 20px; }
        .song-info { margin-top: 20px; border: 1px solid #ccc; padding: 15px; }
        .error { color: red; }
    </style>
</head>
<body>
    <h1>Musikquiz: V칛lj 칀rtionde</h1>

    <div id="quiz-controls">
        <label for="decade-select">V칛lj 칀rtionde:</label>
        <select id="decade-select">
            <option value="60s">60-talet</option>
            <option value="70s">70-talet</option>
            <option value="80s">80-talet</option>
            <option value="90s">90-talet</option>
            <option value="00s">2000-talet</option>
            <option value="10s">2010-talet</option>
            <option value="20s">2020-talet (Aktuella Hits)</option>
        </select>
        <button onclick="startNewRound()">Starta Runda</button>
    </div>

    <div id="quiz-output" class="song-info">
        <p>Klicka p친 "Starta Runda" f칬r att ladda en slumpm칛ssig l친t fr친n det valda 친rtiondet.</p>
    </div>

    <script>
        // 1. Spelliste-ID per 칀rtionde
        // Dessa 칛r ID:n f칬r popul칛ra "All Out" spellistor p친 Spotify.
        const playlistSources = {
            '60s': '37i9dQZF1DXcKqP3JdK0pQ', // All Out 60s
            '70s': '37i9dQZF1DWTJg7XNnKFE3', // All Out 70s
            '80s': '37i9dQZF1DXcBWIGoYBM5M', // All Out 80s
            '90s': '37i9dQZF1DXbTjV1dE9zY7', // All Out 90s
            '00s': '37i9dQZF1DX4oNzlhCrbxM', // All Out 00s
            '10s': '37i9dQZF1DX5BAW6M0K4Vf', // All Out 10s
            '20s': '37i9dQZF1DXcBWIGoYBM5M', // Anv칛nder All Out 80s som exempel f칬r att testa (byt till en aktuell lista)
            // ANV츿ND '37i9dQZF1DXcBWIGoYBM5M' F칐R ATT ENKELT TESTA (츿ndra till "Today's Top Hits" f칬r 2020-talet: '37i9dQZF1DXcBWIGoYBM5M')
        };
        
        const MAX_SONGS = 50; // Vi begr칛nsar valet till de 50 f칬rsta sp친ren i spellistan

        async function startNewRound() {
            const selectElement = document.getElementById('decade-select');
            const selectedDecade = selectElement.value;
            const playlistId = playlistSources[selectedDecade];

            if (!playlistId) {
                document.getElementById('quiz-output').innerHTML = `<p class="error">Kunde inte hitta spellista f칬r ${selectedDecade}.</p>`;
                return;
            }

            document.getElementById('quiz-output').innerHTML = `<p>Laddar l친tar fr친n ${selectedDecade}...</p>`;

            try {
                // 2. Anropa Spotify API f칬r att h칛mta spellistans sp친r
                // DETTA 츿R STEGET DU M칀STE IMPLEMENTERA I DIN APP
                // Du m친ste ha en giltig Spotify API-친tkomsttoken (access_token)
                
                // Exempel p친 API-anrop (du beh칬ver byta ut 'YOUR_ACCESS_TOKEN' och hantera CORS):
                /*
                const response = await fetch(`https://api.spotify.com/v1/playlists/${playlistId}/tracks?limit=${MAX_SONGS}`, {
                    headers: {
                        'Authorization': 'Bearer YOUR_ACCESS_TOKEN' 
                    }
                });

                if (!response.ok) {
                    throw new Error(`Spotify API Error: ${response.statusText}`);
                }

                const data = await response.json();
                const tracks = data.items.filter(item => item.track); // Filtrera bort null-sp친r
                */

                // --- START MOCK DATA (Anv칛nds tills du implementerar API-anropet) ---
                // Denna mock-data simulerar att 50 sp친r h칛mtas
                const mockTracks = Array.from({ length: MAX_SONGS }, (_, i) => ({
                    track: {
                        name: `L친t #${i + 1} (${selectedDecade})`,
                        artists: [{ name: `Artist X` }],
                        id: `mockId-${i}` // Anv칛nds f칬r att spela upp l친ten
                    }
                }));
                const tracks = mockTracks;
                // --- SLUT MOCK DATA ---


                if (tracks.length === 0) {
                    document.getElementById('quiz-output').innerHTML = `<p class="error">Hittade inga sp친r i spellistan.</p>`;
                    return;
                }

                // 3. V칛lj en Slumpm칛ssig L친t fr친n de h칛mtade 50
                const randomIndex = Math.floor(Math.random() * tracks.length);
                const randomTrack = tracks[randomIndex].track;

                // 4. Visa L친tinformation (eller starta uppspelning i din quiz)
                const artistName = randomTrack.artists.map(a => a.name).join(', ');
                
                document.getElementById('quiz-output').innerHTML = `
                    <h2>游꿨 N칛sta L친t:</h2>
                    <p><strong>칀rtionde:</strong> ${selectedDecade}</p>
                    <p><strong>L친tnamn:</strong> ${randomTrack.name}</p>
                    <p><strong>Artist:</strong> ${artistName}</p>
                    <p><strong>Spotify ID:</strong> ${randomTrack.id}</p>
                    <hr>
                    <p>Nu startar din app uppspelningen av l친ten med ID:t: ${randomTrack.id}</p>
                `;

                // Din applogik skulle h칛r kalla p친 Spotifys uppspelningsfunktion med randomTrack.id
                
            } catch (error) {
                console.error("Fel vid laddning av l친t:", error);
                document.getElementById('quiz-output').innerHTML = `<p class="error">Ett fel uppstod: ${error.message}. Kontrollera din Spotify API-anslutning.</p>`;
            }
        }
        
    </script>
</body>
</html>